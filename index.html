<!doctype html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Lindsey and Travis are getting married!</title>
    <meta name="description" content="We would like to invite you to our big day.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff">
    <meta property="og:title" content="Lindsey and Travis are getting married">
    <meta property="og:description" content="We would like to invite you to our big day.">
    <meta property="og:image" content="https://wedding.ramswaroop.me/img/hero-min.jpg">
    <meta property="og:type" content="website">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet" href="css/styles.min.css">
    <script src="https://kit.fontawesome.com/07a7aa3346.js" crossorigin="anonymous"></script>
    <script>
        // load css files from CDN if local node_modules fail
        function loadCssFromCDN(css) {
            // create new link tag
            const link = document.createElement('link');
            if (css === 'animate.css') {
                link.href = 'https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css';
            } else if (css === 'font-awesome.css') {
                link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css';
            }
            link.rel = 'stylesheet';

            // add link tag to head section
            document.getElementsByTagName('head')[0].appendChild(link);
        }
            // load js files from CDN if
            // local node_modules fail
            function loadJsFromCDN(js) {
            if (js === 'waypoints.js') {
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"><\/script>');
        } else if (js === 'jquery.js') {
            document.write('<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"><\/script>');
        }
        }
    </script>
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Allura&family=Cormorant+Garamond:wght@400;700&family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap"
          rel="stylesheet">
    <script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
    <link rel="stylesheet" href="css/normalize.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/jquery.fancybox.css">
    <link rel="stylesheet" href="css/flexslider.css">
    <link rel="stylesheet" href="css/styles.min.css">
    <link rel="stylesheet" href="css/queries.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="https://cdn.addevent.com/libs/atc/1.6.1/atc.min.js" async defer></script>
    <style>
        body, html {
            /*margin: 0;*/
            /*padding: 0;*/
            /*height: 100%;*/
            /*width: 100%;*/
            /*font-family: Arial, sans-serif;*/
            /*color: white;*/
            background-size: cover;
        }
    </style>

</head>

<body id="top">
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->

<section class="hero">
    <video autoplay loop muted playsinline>
        <source src="img/lindsey_and_i.mp4" type="video/mp4">
    </video>

    <section class="navigation">
        <header>
            <div class="header-content">
                <div class="logo"><a href="index.html"><img src="img/logo.png" alt="Logo"></a></div>
                <div class="header-nav">
                    <nav>
                        <ul class="primary-nav">
                            <li><a href="#invitation" style="color: black;">RSVP</a></li> <!-- New Menu Item -->
                            <li><a href="faq.html" style="color: black">FAQ</a></li>
                            <li><a href="travel.html" style="color: black">Travel</a></li>
                        </ul>
                        <ul class="member-actions">
<!--                            <li><a href="#map" class="login">Venue</a></li>-->
                            <li><a href="#rsvp2" class="btn-white btn-small">RSVP</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="navicon">
                    <a class="nav-toggle" href="index.html"><span></span></a>
                    <div id="menuModal" class="modal">
                        <div class="modal-content">
                            <span class="close">&times;</span>
                            <ul class="modal-menu">
                                <li><a href="#invitation">RSVP</a></li>
                                <li><a href="faq.html">FAQ</a></li>
                                <li><a href="travel.html">Travel</a></li>
                                <img src="img/fancy_sep.png" alt="Decorative line" style="width: 100%; max-width: 300px;">
                                <li><a href="#intro">Our Story</a></li>
                                <li><a href="#events_id">Events</a></li>
                                <li><a href="#photo-upload">Photo Upload</a></li>
                                <li><a href="#eng-pics">Engagement Photos</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>
    </section>
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <div class="hero-content text-center">
                    <img alt="this is an image" style="margin-top: -25rem" src="img/logo-lg.png">

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 hidden-xs"></div>
            <div class="col-sm-4 hidden-xs text-center" style="margin-top: 20px; margin-bottom: 10rem"><a href="#invitation"
                                                                                                          class="btn btn-accent btn-large rsvp-btn">RSVP</a>
            </div>
            <div class="col-sm-4 hidden-xs"></div>
        </div>
    </div>
    <div class="down-arrow floating-arrow"><a href="#invitation"><i class="fa fa-angle-down"></i></a></div>
</section>

<section id="invitation" class="section-padding">
    <div class="container">

        <div class="row">
            <div class="col-md-12 text-center">
               <script src="https://cdn.logwork.com/widget/countdown.js"></script>
                <a href="https://logwork.com/countdown-timer"
                   class="countdown-timer"
                   data-timezone="America/Los_Angeles"
                   data-date="2025-06-21 16:00"
                   data-background="#c4aa78"
                   data-digitscolor="#ffffff"
                   style="width: 100%; max-width: 500px; display: block; margin: 0 auto; text-align: center; pointer-events: none;">
                    &#8203;
                </a>

            </div>
        </div>
    </div>
</section>

<section class="rsvp text-center section-padding" id="rsvp2" style="padding-bottom: 30px; background: none;">
    <div class="bubble-text">
        <div class="col-md-12 text-center" style="font-family: 'Cormorant Garamond', cursive; font-size: 24pt; color: #8a6d3b">
            <span class="big-text"><strong>June 21st, 2025</strong></span>
        </div>
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <h3><a style="color: black; font-family: 'Cormorant Garamond', serif">What are you waiting for?</a></h3>
                <div>
                    <a id="preRsvpButton" class="pre-rsvp-btn btn-accent btn-small" data-toggle="modal"
                       data-target="#rsvp-modal">
                        RSVP
                    </a>
                </div>
                <div id="rsvp-modal" class="modal fade" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-body">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span>&times;</span>
                                </button>
                                <h3>Welcome!</h3>
                                <p>We hope you can join us for our wedding celebration! <br> Use any name on your invitation to RSVP for your party.</p>
                                <form id="rsvp-form" class="form-horizontal">
                                    <!-- Name Fields (Search Section) -->
                                    <div class="form-group row">
                                        <label for="first" class="col-sm-2 col-form-label">First Name</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="first" name="first" placeholder="First Name" required>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label for="last" class="col-sm-2 col-form-label">Last Name</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="last" name="last" placeholder="Last Name" required>
                                        </div>
                                    </div>

                                    <!-- Submit Button -->
                                    <div class="form-group row">
                                        <div class="col-sm-12 text-center">
                                            <button type="submit" class="btn btn-primary btn-lg">Search RSVP</button>
                                        </div>
                                    </div>

                                    <hr>
                                    <!-- Dynamic RSVP Section (Initially Hidden) -->
                                    <div id="dynamic-rsvp" style="display: none;">
                                        <!-- Placeholder for dynamically generated fields -->
                                    </div>
                                </form>
                                <div class="submit-message text-center" id="submitMessage" style="display: none; margin-top: 20px;">
                                    <!-- Submit message will be displayed here -->
                                </div>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <div id="search-results" style="display: none; margin-top: 20px;">
                    <!-- Search results will be displayed here -->
                </div>
            </div>
        </div>
    </div>

</section>

<section id="intro" style="padding-top: 10px; text-align: center;">
    <div class="bubble-text">
        <div class="logo-placeholder" style="display: flex; justify-content: center; align-items: center; margin: 0 auto;">
            <img src="img/logo-lg-no-text.png" alt="Logo without text" style="transform: scaleY(-1);">
        </div>
        <h3 class="header" style="font-family: 'Cormorant Garamond', cursive; font-size: 24pt; margin-top: 20px;">Our Story</h3>
        <p style="font-size: 14pt; line-height: 1.8; text-align: center;">
            We first met during our freshman year at CSU Monterey Bay, just two college kids figuring things out. At first, we were just casual acquaintances, running into each other on campus, at parties, and through mutual friends. Little did we know, those chance encounters were just the beginning of our story.
            <br><br>
            In 2014, Travis came up with the perfect excuse to get Lindsey’s number—he joined Lindsey and their friend for surfing in Santa Cruz, claiming he needed more friends in the area. Smooth move, right? It worked! What started as a friendly hangout soon turned into a solid friendship. We spent more and more time together, realizing we just clicked. During the summer of 2016, our friendship emerged into something more and we began dating, making the rest history.
            <br><br>
            Since then, life has been an amazing adventure with each other by our sides. There’s not a day we don't laugh together, show up for the other, and support each other through the big and small. We’re best friends that have grown up so much during our time together. We have so much fun together, whether we’re roasting each other, going on trips and adventures, or just doing life together. Our story is still unfolding, and we're thrilled to have you with us as we enter our next chapter!
            <br><br>
            Love,
            <br>
        </p>
        <p class="fancy-cursive" style="font-size: 24pt;">Lindsey and Travis</p>
    </div>
</section>


<section class="events section-padding" id="events_id" style="background-color: unset;">
    <div class="bubble-text">

            <div class="row">
                <div class="col-md-12 event-column">
                    <h3 class="header" style="font-size: 24pt">Events</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-sm-12 event-column">
                    <div class="wp3">
                        <p><strong>June 20th</strong></p>
                        <h5>WELCOME PARTY <span class="time">5PM - 8PM</span></h5>
<!--                        <p><a href="https://maps.app.goo.gl/AzCHG31yH71HS4qV8" style="color: #2e6da4" target="_blank" rel="noopener noreferrer">Spring Ranch Mendocino, CA</a>-->

                            <br>Join us for dinner, refreshments, and games to kick off our wedding celebration!</p>

                    </div>
                    <div>

                    </div>
                </div>
                <div class="col-md-4 col-sm-12 event-column">
                        <p><strong>June 21st</strong></p>
                        <h5>THE MAIN EVENT <span class="time">4PM-10PM</span></h5>
<!--                        <p><a href="https://maps.app.goo.gl/AzCHG31yH71HS4qV8" style="color: #2e6da4" target="_blank" rel="noopener noreferrer">Spring Ranch Mendocino, CA</a>-->
                        <br>Watch us become husband and wife! Wedding ceremony will be followed with an evening of dinner, drinks, and dancing. </p>


                </div>
                <div class="col-md-4 col-sm-12 event-column">
                    <div class="wp6">
                        <p><strong>June 22nd</strong></p>
                        <h5>FAREWELL COFFEE<span class="time"> 9AM-11AM</span></h5>
<!--                        <p><a href="https://maps.app.goo.gl/AzCHG31yH71HS4qV8" style="color: #2e6da4" target="_blank" rel="noopener noreferrer">Spring Ranch Mendocino, CA</a>-->
                        <br>Stop by on your way out of town so we can say goodbye with coffee, pastries, and love.</p>
                    </div>
                </div>
            </div>
        <p>All events will be held at Spring Ranch Mendocino
            <br>
            <a href="https://maps.app.goo.gl/AzCHG31yH71HS4qV8" style="color: #2e6da4" target="_blank" rel="noopener noreferrer">8475 North CA-1, Little River, CA</a>
        </p>

            <div class="row section-padding">
                <div class="col-md-4 col-md-offset-4 text-center">
                    <a class="btn btn-accent btn-small" data-toggle="modal" data-target="#dc-modal">
                        <i class="fa fa-barcode"></i>&nbsp;&nbsp;Dress code

                    </a>
                </div>
            </div>

        <!--<div class="row">
            <div class="col-xs-12 section-border section-padding">
            </div>
        </div>-->
    </div>

    <div id="dc-modal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span>&times;</span>
                </button>
                <h3 class="text-center section-padding">Dress Code</h3>

                <h5>Welcome Party <span class="time">Friday 5PM - 8PM</span></h5>
                <p>
                    <strong>Dressy Casual</strong>
                    <br>
                    Wear something you feel good in!
                </p>

                <h5>Wedding <span class="time">Saturday 4PM - 10PM</span></h5>
                <p>
                    <strong>Semi-Formal/Formal Attire</strong>
                    <br>
                    We’d love for you to wear festive, bold summer colors—go as vibrant as you’d like! Because the ceremony will be on grass, we recommend avoiding thin heels or stilettos. Thank you for helping make our day extra special with your fabulous style!
                </p>

                <h5>Goodbye Brunch <span class="time">Sunday 9AM - 11AM</span></h5>
                <p>
                    <strong>Come As You Are</strong>
                    <br>
                    We might still be in our pajamas!
                </p> <p class="faq-answer">Your presence matters most, so don’t overthink it—have fun and celebrate with us!</>
                <p </b><br>Still unsure of what to wear? Check out our pinterest board for wedding day inspiration: <a href="https://www.pinterest.com/lintuck3/wedding-wear-inspiration/" style="color: #2e6da4" target="_blank" rel="noopener noreferrer">Wedding Guest Inspiration</a>
                </p>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

</section>

<section id="photo-upload" class="section-padding" style="padding-bottom: 10px">
    <div class="bubble-text">
        <div class="row">
            <div class="col-md-12 text-center" style="padding-bottom: 10px">
                <h3 class="header">Do You Have Any Photos With Us?</h3>
                <p>If you do, we'd love to see them, and add them to the wedding slideshow!</p>
            </div>
            <div class="upload-container">
                <!-- Upload section -->
                <div class="mb-3 text-center">
                    <label for="formFileMultiple" class="form-label"></label>
                    <input class="form-control" type="file" id="formFileMultiple" multiple>
                </div>
            </div>
            <br>
            <div class="submit-btn-container text-center">
                <button type="button" class="btn btn-secondary" id="submitBtn">Submit</button>
            </div>
            <div id="loadingSpinner" style="display: none;">
                <div class="spinner"></div>
            </div>
        </div>

</section>



<section id="eng-pics" class="section-padding">
    <div class="bubble-text">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h3 class="header">Engagement Pics</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <a class="fancybox" rel="group" href="img/eng_pics/tall_hugging.jpeg">
                        <div class="img-wrap">
                            <div class="overlay">
                                <i class="fa fa-search"></i>
                            </div>
                            <img src="img/eng_pics/tall_hugging.jpeg" alt=""/>
                        </div>
                    </a>
                </div>
                <div class="col-md-2">
                    <a class="fancybox" rel="group" href="img/eng_pics/med_hugging.jpg">
                        <div class="img-wrap">
                            <div class="overlay">
                                <i class="fa fa-search"></i>
                            </div>
                            <img src="img/eng_pics/med_hugging.jpg" alt=""/>
                        </div>
                    </a>
                </div>
                <div class="col-md-2">
                    <a class="fancybox" rel="group" href="img/eng_pics/long_dip.jpg">
                        <div class="img-wrap">
                            <div class="overlay">
                                <i class="fa fa-search"></i>
                            </div>
                            <img src="img/eng_pics/long_dip.jpg" alt=""/>
                        </div>
                    </a>
                </div>
                <div class="col-md-2">
                    <a class="fancybox" rel="group" href="img/eng_pics/twirl_med.jpg">
                        <div class="img-wrap">
                            <div class="overlay">
                                <i class="fa fa-search"></i>
                            </div>
                            <img src="img/eng_pics/twirl_med.jpg" alt=""/>
                        </div>
                    </a>
                </div>
                <div class="col-md-2">
                    <a class="fancybox" rel="group" href="img/eng_pics/tall_gazing.jpg">
                        <div class="img-wrap">
                            <div class="overlay">
                                <i class="fa fa-search"></i>
                            </div>
                            <img src="img/eng_pics/tall_gazing.jpg" alt=""/>
                        </div>
                    </a>
                </div>
                <div class="col-md-2">
                    <a class="fancybox" rel="group" href="img/eng_pics/tall_serious_hugging.jpg">
                        <div class="img-wrap">
                            <div class="overlay">
                                <i class="fa fa-search"></i>
                            </div>
                            <img src="img/eng_pics/tall_serious_hugging.jpg" alt=""/>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row hidden-lg hidden-md hidden-xs">
                <div class="col-xs-12 section-border section-padding"></div>
            </div>
        </div>
    </div>
</section>

<!-- Thanks for Submitting Modal -->
<div id="thanksModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thank You!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Thanks for submitting your RSVP. We look forward to seeing you!</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-sm-12 text-center content">
                <span class="to-top-wrapper"><a href="#top" class="to-top"><i class="fa fa-angle-up"></i></a></span>
                <p>Crafted by Travis with lots of <span class="fa fa-heart pulse2"></span> for Lindsey</p>
            </div>
        </div>
    </div>
</footer>
<script src="js/vendor/jquery-1.11.2.min.js" onerror="loadJsFromCDN('jquery.js')"></script>
<script src="node_modules/waypoints/lib/jquery.waypoints.min.js" onerror="loadJsFromCDN('waypoints.js')"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/vendor/bootstrap.min.js"></script>
<script src="js/scripts.min.js"></script>
<script src="js/vendor/jquery-1.11.2.min.js" onerror="loadJsFromCDN('jquery.js')"></script>
<script src="node_modules/waypoints/lib/jquery.waypoints.min.js" onerror="loadJsFromCDN('waypoints.js')"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/vendor/bootstrap.min.js"></script>
<script src="js/jquery.flexslider-min.js"></script>
<script src="js/jquery.mb.YTPlayer.min.js"></script>
<script src="js/vendor/ouical.js"></script>
<script src="js/scripts.min.js"></script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBlPw3GQYI3faa_9mRE6plWuM7xNEmrwH0&callback=initMap"></script>
<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-46465113-4', 'auto');
    ga('send', 'pageview');
</script>

<script src="js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const navToggle = document.querySelector('.nav-toggle');
    const modal = document.getElementById('menuModal');
    const closeBtn = document.querySelector('.close');
    const modalButtons = document.querySelectorAll('.modal-menu li a'); // Select all buttons in the modal

    function openModal() {
        modal.style.display = 'block';
        centerModal();
    }

    function closeModal() {
        modal.style.display = 'none';
    }

    function centerModal() {
        const modalContent = modal.querySelector('.modal-content');
        const windowHeight = window.innerHeight;
        const modalHeight = modalContent.offsetHeight;
        const top = Math.max((windowHeight - modalHeight) / 2, 0);
        modalContent.style.marginTop = `${top}px`;
    }

    navToggle.addEventListener('click', function (event) {
        event.preventDefault();
        openModal();
    });

    closeBtn.addEventListener('click', closeModal);

    window.addEventListener('click', function (event) {
        if (event.target === modal) {
            closeModal();
        }
    });

    modalButtons.forEach(button => {
        button.addEventListener('click', closeModal);
    });

    window.addEventListener('resize', centerModal);
});
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const fileInput = document.getElementById('formFileMultiple');
        const submitBtn = document.getElementById('submitBtn');

        fileInput.addEventListener('change', function () {
            if (fileInput.files.length > 0) {
                submitBtn.style.display = 'block'; // Show the submit button
            } else {
                submitBtn.style.display = 'none'; // Hide the submit button
            }
        });
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("rsvp-form");
        const dynamicRsvp = document.getElementById("dynamic-rsvp");
        const submitMessage = document.getElementById("submitMessage");

        form.addEventListener("submit", async function (event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(form);
            const searchParams = {
                first: formData.get("first").trim(),
                last: formData.get("last").trim(),
            };

            try {
                // Fetch RSVP data from your webhook
                const response = await fetch("https://hook.us1.make.com/8y6oj5hfas1ap2sqccrrr5dfrhhco9fp", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(searchParams),
                });

                if (response.ok) {
                    const rsvpData = await response.json();

                    // Validate the response data
                    if (rsvpData.length === 0 || !rsvpData[0]["First Name"] || !rsvpData[0]["Last Name"]) {
                        showError("No RSVP found. Please check your details and try again.");
                        dynamicRsvp.style.display = "none"; // Hide dynamic RSVP section
                        return;
                    }

                    // Hide the error message and populate the RSVP form if data is valid
                    hideError();
                    populateRsvpForm(rsvpData);
                } else {
                    showError("Error: Unable to fetch RSVP. Please try again.");
                    dynamicRsvp.style.display = "none"; // Hide dynamic RSVP section
                }
            } catch (error) {
                console.error("Error fetching RSVP data:", error);
                showError("An unexpected error occurred. Please try again.");
                dynamicRsvp.style.display = "none"; // Hide dynamic RSVP section
            }
        });

        function populateRsvpForm(data) {
            dynamicRsvp.innerHTML = ""; // Clear any existing content
            dynamicRsvp.style.display = "block"; // Show the RSVP section

            // Loop through the RSVP data and generate sections for each guest
            data.forEach((guest, index) => {
                const guestSection = document.createElement("div");
                guestSection.classList.add("guest-section");

                // Add the Row Number as a custom attribute
                guestSection.setAttribute("data-row-number", guest["Row Number"]);

                guestSection.innerHTML = `
           <h4>RSVP for ${guest["First Name"] || ""} ${guest["Last Name"] || ""}</h4>

            <div class="form-group row mb-3">
                <label class="col-sm-2 col-form-label text-primary font-weight-bold">
                    Welcome Party
                </label>
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="welcomeParty${index}Yes" name="welcomeParty${index}" value="Yes" ${guest["Welcome Party"] === "Yes" ? "checked" : ""} required>
                        <label class="form-check-label" for="welcomeParty${index}Yes">Yes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="welcomeParty${index}No" name="welcomeParty${index}" value="No" ${guest["Welcome Party"] === "No" ? "checked" : ""} required>
                        <label class="form-check-label" for="welcomeParty${index}No">No</label>
                    </div>
                </div>
            </div>

            <div class="form-group row mb-3">
                <label class="col-sm-2 col-form-label text-primary font-weight-bold">
                    Wedding
                </label>
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="wedding${index}Yes" name="wedding${index}" value="Yes" ${guest["Wedding"] === "Yes" ? "checked" : ""} required>
                        <label class="form-check-label" for="wedding${index}Yes">Yes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="wedding${index}No" name="wedding${index}" value="No" ${guest["Wedding"] === "No" ? "checked" : ""} required>
                        <label class="form-check-label" for="wedding${index}No">No</label>
                    </div>
                </div>
            </div>

            <div class="form-group row mb-3">
                <label class="col-sm-2 col-form-label text-primary font-weight-bold">
                    Goodbye Brunch
                </label>
                <div class="col-sm-10">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="goodbyeBrunch${index}Yes" name="goodbyeBrunch${index}" value="Yes" ${guest["Goodbye Brunch"] === "Yes" ? "checked" : ""} required>
                        <label class="form-check-label" for="goodbyeBrunch${index}Yes">Yes</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" id="goodbyeBrunch${index}No" name="goodbyeBrunch${index}" value="No" ${guest["Goodbye Brunch"] === "No" ? "checked" : ""} required>
                        <label class="form-check-label" for="goodbyeBrunch${index}No">No</label>
                    </div>
                </div>
            </div>

            <div class="form-group row align-items-center mb-3">
                <label for="dietaryRestrictions${index}" class="col-sm-2 col-form-label text-primary font-weight-bold">
                    Dietary Restrictions
                </label>
                <div class="col-sm-10">
                    <input type="text"
                           class="form-control rounded-pill border-info shadow-sm"
                           id="dietaryRestrictions${index}"
                           name="dietaryRestrictions${index}"
                           placeholder="Please specify any dietary restrictions"
                           value="${guest["Allergies"] || ""}"
                           style="margin-left: 20px;">
                </div>
            </div>
        `;

                dynamicRsvp.appendChild(guestSection);
            });

            // Add a single email field outside the loop
            const emailSection = document.createElement("div");
            emailSection.classList.add("form-group", "row", "mb-3");
            emailSection.innerHTML = `
                <hr>
                <label for="email" class="col-sm-2 col-form-label text-primary font-weight-bold">
                    Email Reminder
                </label>
                <div class="col-sm-10">
                    <input type="email"
                           class="form-control rounded-pill border-info shadow-sm"
                           id="email"
                           name="email"
                           placeholder="Please enter your email address"
                           value=""
                           style="margin-left: 20px;"
                           >
                </div>
            `;
                    dynamicRsvp.appendChild(emailSection);
            // Add a final submit button for the RSVP
            const finalSubmitButton = document.createElement("div");
            finalSubmitButton.classList.add("form-group", "row", "text-center");
            finalSubmitButton.innerHTML = `
        <div class="col-sm-12">
            <button type="button" id="finalSubmit" class="btn btn-success btn-lg">Submit RSVP</button>
        </div>
    `;
            dynamicRsvp.appendChild(finalSubmitButton);

            // Handle final submission
            document.getElementById("finalSubmit").addEventListener("click", handleFinalSubmit);
        }

        function mapKeysForSecondCall(guest) {
            return {
                first: guest["First Name"],
                last: guest["Last Name"],
                row_number_from_prev: guest["row_number"], // Mapping 'row_number' to 'row_number_from_prev'
                welcome_party: guest["Welcome Party"] === "Yes" ? "Yes" : "No", // Convert to "Yes" or "No"
                brunch: guest["Goodbye Brunch"] === "Yes" ? "Yes" : "No", // Convert to "Yes" or "No"
                ceremony: guest["Wedding"] === "Yes" ? "Yes" : "No", // Convert to "Yes" or "No"
                allergies: guest["Allergies"] || null, // Assuming allergies are optional
                meal_preference: guest["Meal Selection"] || null,
                email: guest["email"] || null,
            };
        }

        async function handleFinalSubmit() {
            const form = document.getElementById("rsvp-form");
            const formData = new FormData(form);
            const email = formData.get("email")?.trim(); // Safely get and trim the email field

            const guests = Array.from(document.querySelectorAll(".guest-section")).map((section, index) => {
                const rowNumber = section.getAttribute("data-row-number");

                return {
                    row_number: rowNumber, // Pass "Row Number" as "row_number" to the API
                    "First Name": section.querySelector(`h4`).textContent.split(" ")[2],
                    "Last Name": section.querySelector(`h4`).textContent.split(" ")[3],
                    "Welcome Party": section.querySelector(`input[name="welcomeParty${index}"]:checked`)?.value || "No",
                    "Wedding": section.querySelector(`input[name="wedding${index}"]:checked`)?.value || "No",
                    "Goodbye Brunch": section.querySelector(`input[name="goodbyeBrunch${index}"]:checked`)?.value || "No",
                    "Meal Selection": section.querySelector(`select[name="mealChoice${index}"]`)?.value || null,
                    "Allergies": section.querySelector(`input[name="dietaryRestrictions${index}"]`)?.value || null,
                    "email": email || null,
                };
            });

            // Submit each guest's data individually
            for (const guest of guests) {
                try {
                    // Map keys to the format expected by the second API
                    const mappedGuest = mapKeysForSecondCall(guest);

                    const response = await fetch("https://hook.us1.make.com/8y6oj5hfas1ap2sqccrrr5dfrhhco9fp", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify(mappedGuest),
                    });

                    if (response.ok) {
                        console.log(`Guest submitted successfully:`, mappedGuest);
                    } else {
                        console.error(`Error submitting guest:`, mappedGuest);
                        alert(`There was an error submitting RSVP for ${guest["First Name"]} ${guest["Last Name"]}. Please try again.`);
                    }
                } catch (error) {
                    console.error(`Unexpected error submitting guest:`, error);
                    alert(`An unexpected error occurred while submitting RSVP for ${guest["First Name"]} ${guest["Last Name"]}. Please try again.`);
                }
            }

            // Show the "Thanks for submitting" modal
            $('#thanksModal').modal('show');
        }

        function showError(message) {
            submitMessage.style.display = "block";
            submitMessage.textContent = message;
            submitMessage.style.color = "red";
        }

        function hideError() {
            submitMessage.style.display = "none";
            submitMessage.textContent = "";
        }
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const preRsvpForm = document.getElementById('pre-rsvp-form');
        const endpoint = "https://hook.us1.make.com/sc9b2o9pwcaq41torasuo69igpoesta5";

        async function sendFormDataToWebhook(formData) {
            // Convert FormData to a plain object
            const formDataObj = {};
            formData.forEach((value, key) => {
                formDataObj[key] = value;
            });

            try {
                const response = await fetch(endpoint, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formDataObj)
                });

                if (response.ok) {
                    const responseData = await response.json();
                    console.log('Response from webhook:', responseData);
                    // Show a nice success message
                    const submitMessage = document.getElementById('submitMessage');
                    submitMessage.style.display = 'block';
                    submitMessage.textContent = 'Thank you for your response, we hope to see you there!';
                    submitMessage.style.color = 'green';

                    // Close the modal after 2 seconds
                    setTimeout(() => {
                        $('#pre-rsvp-modal').modal('hide');
                    }, 2000);
                } else {
                    console.error('Failed to send data to webhook:', response.statusText);
                    alert('There was an error submitting the form. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An unexpected error occurred. Please try again.');
            }
        }

        preRsvpForm.addEventListener('submit', function (event) {
            event.preventDefault();
            const formData = new FormData(preRsvpForm);
            sendFormDataToWebhook(formData);
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const fileInput = document.getElementById('formFileMultiple');
        const submitBtn = document.getElementById('submitBtn');
        const submitMessage = document.getElementById('submitMessage');
        const loadingSpinner = document.getElementById('loadingSpinner'); // Get the spinner element

        const maxConcurrentUploads = 100; // Limit to 3 concurrent uploads
        console.log('Spinner element:', loadingSpinner);

        // Ensure loading spinner is actually present
        if (!loadingSpinner) {
            console.error('Loading spinner element not found!');
        } else {
            console.log('Spinner should be visible when uploading starts.');
        }

        fileInput.addEventListener('change', function () {
            if (fileInput.files.length > 0) {
                submitBtn.style.display = 'block'; // Show the submit button
                console.log('Submit button shown.');
            } else {
                submitBtn.style.display = 'none'; // Hide the submit button
                console.log('Submit button hidden.');
            }
        });
        submitBtn.addEventListener('click', async function () {
            const files = Array.from(fileInput.files);
            const endpoint = 'https://us-central1-personal-apis-408200.cloudfunctions.net/upload_to_drive';

            // Show the loading spinner
            loadingSpinner.style.display = 'block';

            let success = true;
            let index = 0;

            async function uploadNextBatch() {
                const batch = files.slice(index, index + maxConcurrentUploads);
                index += maxConcurrentUploads;

                await Promise.all(
                    batch.map(async (file) => {
                        try {
                            const formData = new FormData();
                            formData.append('file', file);

                            const response = await fetch(endpoint, {
                                method: 'POST',
                                body: formData,
                            });

                            if (!response.ok) {
                                throw new Error(`Error: ${response.statusText}`);
                            }

                            // Check if the response is JSON
                            const contentType = response.headers.get('content-type');
                            if (contentType && contentType.includes('application/json')) {
                                const result = await response.json();
                                console.log('File uploaded successfully', result);
                            } else {
                                const text = await response.text();
                                console.error('Unexpected response format:', text);
                                throw new Error('Server did not return JSON');
                            }
                        } catch (error) {
                            console.error('Upload error', error);
                            success = false;
                        }
                    })
                );

                if (index < files.length) {
                    await uploadNextBatch();
                }
            }

            try {
                await uploadNextBatch();

                if (success) {
                    submitMessage.style.display = 'block';
                    submitMessage.textContent = 'Thank you for sharing your memories with us!';
                    submitMessage.style.color = 'green';

                    // Clear the file input
                    fileInput.value = '';
                    submitBtn.style.display = 'none';
                } else {
                    submitMessage.style.display = 'block';
                    submitMessage.textContent = 'There was an error submitting your files. Please try again.';
                    submitMessage.style.color = 'red';
                }
            } finally {
                // Hide the loading spinner
                loadingSpinner.style.display = 'none';
            }
        });
    });
</script>
<script>

</script>
</body>
</html>
